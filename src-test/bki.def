/*
               Банковская интегрированная система БИСквит
    Copyright: (C) 1992-2006 ЗАО "Банковские информационные системы"
     Filename: pp-bki.p
      Comment: Инструмент для предоставления информации по кредитам для НБКИ
   Parameters:
         Uses:
      Used by:
      Created: 27/04/2006 Gorm (59661)
     Modified: 04.06.2009 14:43 MUTA  0111454 
     Modified:
*/

/* Поиск записи в классификаторе в поле misc по вхождению */
FUNCTION GetCodeByMisc RETURNS CHAR
    (iClass AS CHAR,
     iCount AS INT64, 
     iVal   AS CHAR) IN {1}.

/* вычисление суммы операций по списку параметров */
FUNCTION ListGetSummByIntVar RETURNS DECIMAL
    (BUFFER loan FOR loan,  /* кредитный договор */
     iDate     AS DATE,     /* дата выгрузки */
     iListOper AS CHAR)  IN {1}.

/* 4. Тип счета */
FUNCTION BKIAccType RETURNS CHAR
   (BUFFER loan FOR loan) IN {1}.

/* 5. Отношение к счету */
FUNCTION BKIAccRelation RETURNS CHAR
   (BUFFER loan FOR loan,               
    BUFFER term-obl FOR term-obl,
    iCustSurr AS CHAR, 
    iCorp AS LOGICAL) IN {1}.

/* 7. Дата последней выплаты  */
FUNCTION BKIDateOFLstPay RETURNS DATE
   (iContract AS CHAR,
    iContract AS CHAR,    
    iDate AS DATE) IN {1}.

/* 13. Просрочка */
FUNCTION BKIPastDue RETURNS DECIMAL
    (BUFFER loan FOR loan,
     iDate AS DATE,    
     iDatePay AS DATE) IN {1}.

/* 11. Лимит кредита/ исходная сумма кредита */
FUNCTION BKICredLimitAmt RETURNS DECIMAL
    (BUFFER loan FOR loan) IN {1}.

/* 12. Баланс */
FUNCTION BKICredBalance RETURNS DECIMAL
   (BUFFER loan FOR loan,            
    iDate AS DATE,                
    iDatePay AS DATE) IN {1}.

/* 14. Следующий платеж */
FUNCTION BKINextPayment RETURNS DECIMAL
    (iContract AS CHAR,
     iContCode AS CHAR,    
     iDate AS DATE) IN {1}.   

/* 15.  Частота выплат */
FUNCTION BKICredPayFreq RETURNS CHAR
    (iContract AS CHAR,
     iContCode AS CHAR,    
     iDate AS DATE) IN {1}. 

/* 16. Своевременность платежей  */
FUNCTION BKIMOP RETURNS CHAR
    (iContract AS CHAR,
     iContCode AS CHAR,
     iDate AS DATE) IN {1}.  

/* 18. Код залога  */
FUNCTION BKICollatCode RETURNS CHAR
    (BUFFER bterm-obl FOR term-obl,
     iDate AS DATE) IN {1}.   

/* 20.  Дата финального платежа */
FUNCTION BKIDatePayDue RETURNS DATE
   (iContract AS CHAR,
    iContCode AS CHAR,     
    iDate AS DATE) IN {1}.   

/* 21.  Дата финальной выплаты процентов */
FUNCTION BKIDateInterPayDue RETURNS DATE
    (iContract AS CHAR,
     iContCode AS CHAR,    
     iDate AS DATE) IN {1}. 

/* 22.  Частота выплат процентов */
FUNCTION BKIInterPayFreq RETURNS CHAR
    (iContract AS CHAR,
     iContCode AS CHAR,    
     iDate AS DATE) IN {1}.

/* 25. Текущая задолженость */
FUNCTION BKIAmountOutst RETURNS DECIMAL
    (BUFFER loan FOR loan,         
     iDate AS DATE) IN {1}.

FUNCTION BKIGetLoanType RETURNS INT64 
   (BUFFER loan     FOR loan,
    INPUT iDate     AS DATE) IN {1}.

FUNCTION IsDefaultPayment RETURNS LOGICAL
   (BUFFER loan     FOR loan,
    INPUT iDate     AS DATE,
    INPUT iTermDays AS INT64,
    INPUT iCnt      AS INT64) IN {1}.

FUNCTION BKIGetXAttrByCode RETURNS CHARACTER  
   (BUFFER bloan     FOR loan,
    INPUT  iCode     AS  CHARACTER) IN {1}.
/* $LINTENV ='1ut' */
/* $LINTVSS ='$/ws2-tst/bq/' */
/* $LINTDATE='12/03/2015 14:15:15.088+04:00' */
/* $LINTUSER='BIS' */
/* $LINTMODE='1' */
/* $LINTFILE='bki.def' */
/*prosigndfq+4skGVH/ogNuP84ZaeQ*/